<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description"/><title>跨主机的 docker 容器编排 nap-compose （二） | NAP</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">跨主机的 docker 容器编排 nap-compose （二）</h1><a id="logo" href="/">NAP</a><p class="description">Next Application Platform</p></div><div id="nav-menu"><a href="/" class="current"><i class="icon-home"> 首页</i></a><a href="/archives/"><i class="icon-archive"> 归档</i></a><a href="/atom.xml"><i class="icon-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">跨主机的 docker 容器编排 nap-compose （二）</h1><div class="post-meta">2015-11-07 | <span class="categories">分类于<a href="/categories/nap/"> nap</a></span></div><span data-thread-key="2015/11/07/nap-compose-2/" class="ds-thread-count"></span><div class="post-content"><p>简化的跨主机的多容器应用编排和部署工具的实现。</p>
<a id="more"></a>
<hr>
<p>我们已经在 <a href="http://nap-group.herokuapp.com/2015-11/nap-compose-1/" target="_blank" rel="external"> 前一篇文章 </a> 介绍了背景和思路，现在该写代码了。<br>我们准备用 python 3 来实现。先了解一下 docker api 和 python ssh 的库作为准备工作。主要部分在于梳理 docker-compose 的源码，然后在其基础上修改 docker client 相关的函数，改成我们的实现，从而重用 compose 已经实现的解析<code>docker-compose.yml</code>，生成容器间连接关系和获取容器域名的功能。</p>
<h2 id="Docker-Remote-API"><a href="#Docker-Remote-API" class="headerlink" title="Docker Remote API"></a><a href="http://docs.docker.com/engine/reference/api/docker_remote_api_v1.21/" target="_blank" rel="external">Docker Remote API</a></h2><h3 id="概述"><a href="# 概述" class="headerlink" title="概述"></a>概述 </h3><p> 之前我们是通过定义 fleet 的 service unit 来管理多个主机上的 docker daemon 的。在 service unit 中可以直接写 docker 命令，fleet 会把 service 分派给各主机的 systemd 来执行。<br>现在我们要通过 docker 提供的 restful api 来编程直接与 docker daemon 交互。restful api 返回的是 json 格式的数据。有很多官方或非官方的 repo 把 restful api 包装成各种 <a href="http://docs.docker.com/engine/reference/api/remote_api_client_libraries/" target="_blank" rel="external"> 主流编程语言的 docker client 库</a>，这样我们就不用自己写解析 json 的那部分代码了。</p>
<h3 id="开启 api 访问的 tcp 端口"><a href="# 开启 api 访问的 tcp 端口" class="headerlink" title="开启 api 访问的 tcp 端口"></a>开启 api 访问的 tcp 端口 </h3><p> 要远程访问 docker api，首先要开启 tcp 端口。<br>对 ubuntu 14.04 系统，在 <code>/etc/default/docker</code> 中增加一行：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">DOCKER_OPTS</span>=<span class="string">"-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock"</span></div></pre></td></tr></table></figure></p>
<p>CoreOS 和 RHEL/CentOS 使用 systemd 来管理系统服务，Ubuntu 15.04 及以后的版本也改为 systemd，设置方法有所不同，具体可以参考 <a href="https://coreos.com/os/docs/latest/customizing-docker.html" target="_blank" rel="external">CoreOS 的文档</a> 和<a href="http://www.dockone.io/question/616" target="_blank" rel="external">dockone 上的相关问题</a></p>
<p>设置后重新启动 docker daemon，即可从通过 2375 访问 docker api。另外后面的 <code>unix:///var/run/docker.sock</code> 是给本机的 docker client 命令行使用的。我们实验的主机（VM）是 ubuntu 15.10，IP 是<code>10.1.1.5</code>，安装了 docker 1.9.0，测试一下 api：<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl <span class="string">http:</span><span class="comment">//10.1.1.5:2375/version</span></div></pre></td></tr></table></figure></p>
<p>也可以用 chrome 访问这个地址。推荐安装 json formatter 这个 chrome 插件，它可以格式化显示 json 数据。</p>
<p>返回的结果如图：<br><img src="/images/remote-api.png" height="240" alt=""></p>
<blockquote>
<p>直接暴露 tcp 端口是有安全问题的。docker api 支持登录验证，不过这里为了简便没有使用。</p>
</blockquote>
<h3 id="docker-py 简单示例"><a href="#docker-py 简单示例" class="headerlink" title="docker-py 简单示例"></a>docker-py 简单示例 </h3><p> 我们使用的 <a href="https://github.com/docker/docker-py" target="_blank" rel="external">docker-py</a> 是 docker 官方实现的。在开发机器上通过 pip 安装这个库。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">apt-get install python3-pip  <span class="comment"># 对 ubuntu; windows 在安装 python 时会同时安装 pip</span></div><div class="line">pip3 install docker-py</div></pre></td></tr></table></figure></p>
<p>下面是启动容器、获取运行容器列表和容器 ip 的示例代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> docker</div><div class="line"></div><div class="line">client = docker.Client(base_url= <span class="string">'http://10.1.1.5:2375'</span>)</div><div class="line"></div><div class="line">container = client.create_container(image=<span class="string">'ubuntu:latest'</span>,command=<span class="string">'echo hello'</span>)</div><div class="line"></div><div class="line">print(container[<span class="string">'Id'</span>])</div><div class="line">client.start(container)</div><div class="line"></div><div class="line">containers = client.containers()           <span class="comment"># /containers/json</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> containers:</div><div class="line">    info = client.inspect_container(item)  <span class="comment"># /containers/&#123;id&#125;/json</span></div><div class="line">    print(<span class="string">"[&#123;0&#125;] &#123;1&#125; &#123;2&#125;"</span>.format(item[<span class="string">'Id'</span>][<span class="number">0</span>:<span class="number">9</span>],</div><div class="line">                                 info[<span class="string">'NetworkSettings'</span>][<span class="string">'IPAddress'</span>],</div><div class="line">                                 info[<span class="string">'Name'</span>]))</div><div class="line">    <span class="comment"># print(info['HostsPath'])</span></div></pre></td></tr></table></figure></p>
<p>运行的结果示例如下：<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function">C:\<span class="title">Python3</span>\<span class="title">python.exe</span> <span class="title">D</span>:/<span class="title">Code</span>/<span class="title">Py</span>/<span class="title">main.py</span></span></div><div class="line">[<span class="title">f4c28710d</span>] 172.17.0.4 /<span class="title">shipyard</span>-<span class="title">controller</span></div><div class="line">[7<span class="title">edce4fce</span>] 172.17.0.6 /<span class="title">shipyard</span>-<span class="title">swarm</span>-<span class="title">agent</span></div><div class="line">[3<span class="title">c71749ce</span>] 172.17.0.7 /<span class="title">shipyard</span>-<span class="title">swarm</span>-<span class="title">manager</span></div><div class="line">[<span class="title">ea3527753</span>] 172.17.0.5 /<span class="title">shipyard</span>-<span class="title">proxy</span></div><div class="line">[3<span class="title">e44ea102</span>] 172.17.0.2 /<span class="title">shipyard</span>-<span class="title">certs</span></div><div class="line">[184391<span class="title">e5d</span>] 172.17.0.3 /<span class="title">shipyard</span>-<span class="title">discovery</span></div><div class="line">[<span class="title">b9d60b44e</span>] 172.17.0.8 /<span class="title">shipyard</span>-<span class="title">rethinkdb</span></div><div class="line"></div><div class="line"><span class="title">Process</span> <span class="title">finished</span> <span class="title">with</span> <span class="title">exit</span> <span class="title">code</span> 0</div></pre></td></tr></table></figure></p>
<p>这个库的函数与 docker remote api 文档有很直接的对应关系。函数的返回值也是与文档对应的 json 对象，可以通过字典的方式非常方便的获取相关字段的值。</p>
<h2 id="python-ssh"><a href="#python-ssh" class="headerlink" title="python ssh"></a>python ssh</h2><p>通过 ssh 操作远程主机是不太规范的做法。原则上说，我们也可以不必使用 remote api，而是直接 ssh 到各主机，然后执行 docker 命令，甚至做任何系统操作。不过我们不想集齐 docker 三件套，用 docker engine 来修改 hosts，而又没有相关的 api，所以只能用 ssh 了。</p>
<p>这里我们参考《Python 自动化运维》，使用 <a href="https://github.com/paramiko/paramiko" target="_blank" rel="external">paramiko</a> 这个库。安装过程费了点周折。</p>
<p>先说 Windows 上的安装，直接用 <code>pip install paramiko</code> 是装不上的，会卡在依赖项 <code>pycrypto</code> 上。安装 <code>pycrypto</code> 过程中需要 MSVC 来编译，不过我没有安装 MSVC，Google 到的一个预编译的二进制文件不支持 python 3.5，好在找到另一个预编译的，安装方法如下：<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pip install --use-wheel --<span class="keyword">no</span>-<span class="built_in">index</span> --<span class="keyword">find</span>-links=http<span class="variable">s:</span>//github.<span class="keyword">com</span>/sfbahr/PyCrypto-Wheels/raw/master/pycrypto-<span class="number">2.6</span>.<span class="number">1</span>-cp35-none-win_amd64.whl pycrypto</div><div class="line">pip install paramiko</div></pre></td></tr></table></figure></p>
<p>在 Ubuntu 上还要麻烦些。在 Ubuntu 15.10 上，默认有 python 2.7 和 python 3.4，在安装 <code>python3-pip</code> 时，会自动安装 gcc，g++ 等开发工具，还有 python3.5，不过没有安装 python3.5-dev，导致无法编译<code>pycrypto</code>。</p>
<blockquote>
<p>PS, pip3 默认使用 python3.5，而不是系统自带的 python3.4，所以最好把 <code>/usr/bin/python3</code> 这个符号链接从 python3.4 改成 python3.5。<br>按照下面的步骤安装：<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">apt-get <span class="keyword">install</span> python3.<span class="number">5</span>-dev</div><div class="line">pip3 <span class="keyword">install</span> pycrypto</div><div class="line">pip3 <span class="keyword">install</span> paramiko</div></pre></td></tr></table></figure></p>
</blockquote>
<p>下面是 Windows 上的一个示例<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">import paramiko</div><div class="line">import os</div><div class="line"></div><div class="line">hostname=<span class="string">'10.1.1.5'</span></div><div class="line">username=<span class="string">'root'</span></div><div class="line">paramiko<span class="selector-class">.util</span><span class="selector-class">.log_to_file</span>(<span class="string">'D:\ssh.log'</span>)</div><div class="line"></div><div class="line">ssh = paramiko.SSHClient()</div><div class="line">ssh.load_system_host_keys()</div><div class="line"></div><div class="line">key=paramiko<span class="selector-class">.RSAKey</span><span class="selector-class">.from_private_key_file</span>(os<span class="selector-class">.path</span><span class="selector-class">.expanduser</span>(<span class="string">'D:\VM\ssh\id_rsa'</span>))</div><div class="line">ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</div><div class="line"></div><div class="line">ssh.connect(hostname=hostname, username=username, pkey=key)</div><div class="line"></div><div class="line">stdin,stdout,stderr=ssh.exec_command(<span class="string">'uname -a'</span>)</div><div class="line"><span class="function"><span class="title">print</span><span class="params">(stdout.read()</span></span>)</div><div class="line"></div><div class="line">ssh.close()</div></pre></td></tr></table></figure></p>
<p>这个例子是通过 ssh key 登录到 VM 上，然后执行 <code>uname -a</code> 命令。返回的结果如下：<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">b<span class="symbol">'Linux</span> x <span class="number">4.2</span>.<span class="number">0</span>-<span class="number">16</span>-<span class="keyword">generic</span> #<span class="number">19</span>-Ubuntu SMP Thu Oct <span class="number">8</span> <span class="number">15</span>:<span class="number">35</span>:<span class="number">06</span> UTC <span class="number">2015</span> x86_64 x86_64 x86_64 GNU/Linux\n'</div></pre></td></tr></table></figure></p>
<h2 id="梳理 docker-compose 的源码"><a href="# 梳理 docker-compose 的源码" class="headerlink" title="梳理 docker-compose 的源码"></a>梳理 docker-compose 的源码 </h2><p>OK，准备工作基本就绪。下面梳理一下<code>docker-compose up</code> 命令来创建、启动和连接多个容器涉及的代码，主要是参考 <a href="https://github.com/docker/compose" target="_blank" rel="external">github 上的源码</a> 和《Docker 容器与容器云》的 6.1.2，下面的图参考了这本书的图 6.1。<br><img src="/images/compose.png" alt=""></p>
<ul>
<li>project 对象从 compose.yml 获取 service 列表，并根据 link 计算出各 service 的依赖关系，以此为顺序来创建各 service。</li>
<li>docker-compose 是针对单个 docker engine 的，project 对象只关联了一个 docker-client 对象，首先我们要把它改成一个列表；</li>
<li>service 对象也是只关联了一个 docker-client 对象，它是从 project 传递过来的，最终传给 container 对象来创建和启动容器；</li>
<li>从 client 列表中指派一个 client 给 container 对象，就是所谓的调度了。因为一个 service 会对应多个 container，这些 container 应该可以跨 Host，所以调度应该发生在 service→container 这个阶段；</li>
<li>我们需要记录下来哪个 docker-client 创建了哪个 service 下面的 container，容器的 id，以及容器启动后的 ip 地址，这样我们再 ssh 到那个 Host 上去，修改对应容器 id 目录下的 hosts 文件；</li>
<li>上面的操作可能会造成若干秒的延迟后才能正常地通过 hostname 来进行通信，为此，在容器的启动命令之前插入一个 sleep 命令，防止因为连接超时导致应用启动失败。</li>
</ul>
</div><div class="tags"><a href="/tags/nap/">nap</a><a href="/tags/docker/">docker</a><a href="/tags/compose/">compose</a></div><div class="post-nav"><a href="/2015/11/08/east-2/" class="pre"><i class="icon-previous">HBase ORM 以及 schema 设计</i></a><a href="/2015/11/07/nap-compose-1/" class="next">跨主机的 docker 容器编排 nap-compose （一）<i class="icon-next"></i></a></div><div data-thread-key="2015/11/07/nap-compose-2/" data-title="跨主机的 docker 容器编排 nap-compose （二）" data-url="http://nap-blog.artemisprojects.org/2015/11/07/nap-compose-2/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2015/11/07/nap-compose-2/" data-title="跨主机的 docker 容器编排 nap-compose （二）" data-url="http://nap-blog.artemisprojects.org/2015/11/07/nap-compose-2/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://nap-blog.artemisprojects.org"/></form></div><div class="widget"><div class="widget-title">分类</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/OpenStack/">OpenStack</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/TVDCR/">TVDCR</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/east/">east</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nap/">nap</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/书架/">书架</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/大数据/">大数据</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/未分类/">未分类</a></li></ul></div><div class="widget"><div class="widget-title">标签</div><div class="tagcloud"><a href="/tags/nosql/" style="font-size: 15px;">nosql</a> <a href="/tags/openstack/" style="font-size: 15px;">openstack</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/api/" style="font-size: 15px;">api</a> <a href="/tags/hadoop/" style="font-size: 15px;">hadoop</a> <a href="/tags/Hive/" style="font-size: 15px;">Hive</a> <a href="/tags/Tez/" style="font-size: 15px;">Tez</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/transacion/" style="font-size: 15px;">transacion</a> <a href="/tags/dynamic-reconfiguration/" style="font-size: 15px;">dynamic reconfiguration</a> <a href="/tags/ORM/" style="font-size: 15px;">ORM</a> <a href="/tags/devstack/" style="font-size: 15px;">devstack</a> <a href="/tags/schema/" style="font-size: 15px;">schema</a> <a href="/tags/east/" style="font-size: 15px;">east</a> <a href="/tags/mesos/" style="font-size: 15px;">mesos</a> <a href="/tags/nap/" style="font-size: 15px;">nap</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/compose/" style="font-size: 15px;">compose</a> <a href="/tags/restful/" style="font-size: 15px;">restful</a> <a href="/tags/OpenStack/" style="font-size: 15px;">OpenStack</a> <a href="/tags/Neutron/" style="font-size: 15px;">Neutron</a> <a href="/tags/floating-ip/" style="font-size: 15px;">floating-ip</a> <a href="/tags/rest/" style="font-size: 15px;">rest</a></div></div><div class="widget"><div class="widget-title">友情链接</div><ul></ul><a href="http://nap-blog.artemisprojects.org/2015/10/21/books/" title="����" target="_blank">����</a><ul></ul><a href="http://jetmuffin.github.io/" title="Jie CHEN" target="_blank">Jie CHEN</a><ul></ul><a href="http://cshuo.github.io/" title="Shuo CHEN" target="_blank">Shuo CHEN</a><ul></ul><a href="http://NAP-GHJ.github.io" title="Hongjun GE" target="_blank">Hongjun GE</a><ul></ul><a href="http://itanch.github.io" title="Tianchi LIU" target="_blank">Tianchi LIU</a><ul></ul><a href="http://Luziling.github.io" title="Ziling LU" target="_blank">Ziling LU</a><ul></ul><a href="http://dmemoing.github.io" title="Jing DENG" target="_blank">Jing DENG</a><ul></ul><a href="http://rdmclin2.github.io/" title="Chenglin MENG" target="_blank">Chenglin MENG</a><ul></ul><a href="http://co2y.github.io/" title="Weiyi WANG" target="_blank">Weiyi WANG</a><ul></ul><a href="http://qunnn41.github.io" title="Yiqun WANG" target="_blank">Yiqun WANG</a><ul></ul><a href="http://flyxu.github.io" title="Xiang XU" target="_blank">Xiang XU</a><ul></ul><a href="http://monkey-h.github.io/" title="Zhongliang YUAN" target="_blank">Zhongliang YUAN</a><ul></ul><a href="http://ying-zhang.github.io/" title="Ying ZHANG" target="_blank">Ying ZHANG</a></div><div class="widget"><div class="widget-title">最新文章</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/03/15/hadoop_hive_tez/">Hadoop, Hive, Tez 搭建笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/10/nap-doc/">NAP 使用手册</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/30/photos/">我们的 2015</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/18/hotSwapAgent-not/">Hotswap Agent 学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/10/zookeeper-note/">ZooKeeper 学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/02/openstack_neutron/">OpenStack 平台 Neutron 服务初探</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/20/openstack_floating_ip/">OpenStack 平台手动搭建以及 floating-ip 的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/19/fcws-api-doc/">凤城卫士 API 文档</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/10/spring-transaction-manager/">Spring Transaction Manager 学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/09/devstack-1/">OpenStack 与 DevStack 初探</a></li></ul></div><div class="widget"><div class="comments-title">最近评论</div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div></div></div></div><div id="footer">© <a href="/" rel="nofollow">NAP.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js"></script>
<script src="/js/totop.js"></script><script src="/js/fancybox.pack.js"></script>
<script src="/js/jquery.fancybox.js"></script><link rel="stylesheet" href="/css/jquery.fancybox.css"><script>var duoshuoQuery = {short_name:'yingz'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//dn-comment.qbox.me/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script></div></body></html>